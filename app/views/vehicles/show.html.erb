<% content_for :canonical, seo_vehicle_path(id: @vehicle.id, name: @vehicle.to_s('-')) %>
<% content_for :modal, 'modals/vehicle_gallery' %>

<% if notice %>
<p id="notice" class="alert-box"><%= notice %></p>
<% end %>

<% if current_user %>
	<%= render 'vehicles/nav', page: :show %>
<% end %>


<% unless @vehicle.photos.empty? %>
<div class="row photo-box">
  <% src = @vehicle.featured ? @vehicle.featured.url(:original) : @vehicle.photos.first.url(:original) %>
  <div class="large-12 columns photo" data-src="<%= src %>" data-reveal-id="gallery-modal">
  </div>
  <div class="large-12 columns photos">
    <% i = 0 %>
    <% @vehicle.photos.order(:vehicles_photo_id).limit(16).each do |photo| %>
	    <% i += 1 %>
		<%= image_tag photo.image.url(:thumb), {alt: @vehicle.to_s, data: { src: photo.image.url(:original), 'reveal-id' => 'gallery-modal', id: photo.id, slide_id: i }} %>
    <% end %>
  </div>
</div>
<% end %>

<header>
  <h1><%= @vehicle.to_s %></h1>
  <% price = link_to 'Bid On Ebay', @vehicle.ebay unless @vehicle.ebay.empty? %>
  <% price ||= number_to_currency(@vehicle.price, {precision:0}) %>
  <h2 class="subtitle"><%= price %> &mdash; <%= @vehicle.subtitle %></h2>
</header>


<p class="description">
  <%= @vehicle.description %>
</p>


<div class="row info">
  <div class="general large-6 columns">
    <h4 class="centered">Information</h4>
	<table class="heading-right full-width">
	  <tr>
	    <th>Year</th>
	    <td><%= @vehicle.year %></td>
	  </tr>
	  <tr>
	    <th>Make</th>
	    <td><%= @vehicle.make.name %></td>
	  </tr>
	  <tr>
	    <th>Model</th>
	    <td><%= @vehicle.model.name %></td>
	  </tr>
	  <tr>
	    <th>Stock Number</th>
	    <td>#<%= @vehicle.stock_number %></td>
	  </tr>
	  <tr>
	    <th>Vehicle ID Number</th>
	    <td>#<%= @vehicle.vin %></td>
	  </tr>
	  <tr>
	    <th>Miles</th>
	    <td><%= @vehicle.miles %></td>
	  </tr>
	  <tr>
	    <th>Title</th>
	    <td><%= @vehicle.title.name %></td>
	  </tr>
	  <tr>
	    <th>Warranty</th>
	    <td><%= @vehicle.warranty.name %></td>
	  </tr>
	  <tr>
	    <th>Transmission</th>
	    <td><%= @vehicle.transmission.name %></td>
	  </tr>
	  <tr>
	    <th>Engine</th>
	    <td><%= @vehicle.engine_type %></td>
	  </tr>
	  <tr>
	    <th>Interior Color</th>
	    <td><%= @vehicle.int_color.name %></td>
	  </tr>
	  <tr>
	    <th>Exterior Color</th>
	    <td><%= @vehicle.ext_color.name %></td>
	  </tr>
	</table>
  </div>
  <div class="condition large-6 columns">
	<h4 class="centered">Condition</h4>
    <table class="heading-right full-width">
      <tr>
        <th>Status</th>
        <td><%= @vehicle.status.name %></td>
      </tr>
      <tr>
        <th>Drivability</th>
        <td><%= @vehicle.drivable.name %></td>
      </tr>
      <tr>
        <th>Engine</th>
        <td><%= @vehicle.engine.name %></td>
      </tr>
      <tr>
        <th>Suspension</th>
        <td><%= @vehicle.suspension.name %></td>
      </tr>
      <tr>
        <th>Paint</th>
        <td><%= @vehicle.paint.name %></td>
      </tr>
      <tr>
        <th>Interior</th>
        <td><%= @vehicle.interior.name %></td>
      </tr>
      <tr>
        <th>Stains</th>
        <td><%= @vehicle.stains? ? 'Yes': 'No' %></td>
      </tr>
      <tr>
        <th>Tears</th>
        <td><%= @vehicle.tears? ? 'Yes': 'No' %></td>
      </tr>
      <tr>
        <th>Burns</th>
        <td><%= @vehicle.burns? ? 'Yes': 'No' %></td>
      </tr>
    </table>
  </div>
  <div class="features large-12 columns">
	<h4 class="centered">Features</h4>
    <div class="list row">
      <% @vehicle.features.find_each do |feature| %>
	      <div class="large-4 small-6 columns feature">
	        <%= feature.name %>
	      </div>
      <% end %>
    </div>
  </div>
</div>

<p class="small">Vehicle last updated <%= time_ago_in_words(@vehicle.updated_at) %> ago.</p>
